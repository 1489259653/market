# 超市管理系统需求规格书（优化版）


## 目录
1. 术语表
2. 核心需求
3. 补充功能
4. 非功能性需求
5. 技术实现建议
6. 评分加分项


## 1. 术语表
| 术语         | 定义说明                                                                 |
|--------------|--------------------------------------------------------------------------|
| 商品编码     | 系统内唯一标识商品的字符串（前缀+编号，如"S00000001"），扫码功能的核心关联字段 |
| 订单号       | 唯一标识销售交易的编号，生成规则：表示（IN、OUT）日期（8位）+ 流水号（4位），如"IN202510270001" |
| 库存下限     | 商品库存预警阈值，低于该值时触发补货提醒（单位与商品销售单位一致）           |
| 会员积分     | 会员消费1元累计1积分，积分可抵扣现金（100积分=1元）                         |
| Mock功能     | 模拟实现的功能（非真实调用硬件/接口），如打印小票用console替代                 |


## 2. 核心需求（优先级：必须实现）
### 2.1 商品信息管理
- 记录供货方信息：名称、生产地、联系方式（手机号/座机）、营业执照编号（可选）
- 记录超市方信息：商品名称、商品编码（唯一）、单价（保留2位小数）、数量、销售单位（个/克/瓶等）、分类（见2.1.1）、保质期（可选，格式：YYYY-MM-DD）

#### 2.1.1 商品分类管理
- 预设分类：食品、日用品、饮料、文具、粮油（支持管理员新增/修改分类）
- 支持按分类浏览和查询商品

### 2.2 库存记录
- 记录商品当前数量，支持进货（+）、销售（-）、退货（+）操作的库存更新
- 支持按商品名称或编码查询库存详情（含历史变动记录）

### 2.3 销售交易处理
- 记录销售信息：销售时间、订单号、商品编码、商品名称、销售数量、单价、销售金额（数量×单价）、付款方式
- 生成销售小票（文本格式，含订单号、时间、商品明细、总金额、付款方式）

### 2.4 扫码功能（Mock）
- 扫码进货：手动输入商品编码，录入进货数量、进货价，自动更新库存（+）
- 扫码销售：手动输入商品编码，录入销售数量，自动计算金额并更新库存（-）
- 商品编辑界面扫码：在商品编辑界面添加扫描按钮，支持通过摄像头扫描条形码自动填充商品编码及相关信息

### 2.5 支付模拟（Mock）
- 支持付款方式选择：现金、支付宝、微信
- 输入实付金额后，自动计算找零（现金支付时），并返回"支付成功"


## 3. 补充功能（按优先级划分）
### 3.1 高优先级（建议实现）
#### 3.1.1 用户权限管理（Mock）
- 角色划分：
  - 管理员：所有功能权限（含用户管理、分类管理）
  - 收银员：销售、查询库存、查看销售记录
  - 仓库管理员：进货、库存管理、库存预警查看
- 登录/登出：用户名+密码（本地存储，密码加密采用MD5算法）

#### 3.1.2 库存预警功能
- 支持为每个商品设置库存下限（默认值：10个/克）
- 低于下限的商品在库存列表中标红显示，并在首页提示"需补货商品：XX件"
- 过期提醒：保质期≤7天的商品标黄显示，已过期商品标红显示

#### 3.1.3 退货/退款功能
- 输入订单号查询历史销售记录，选择需退货商品及数量
- 自动更新库存（+），并生成退货记录（关联原订单号）

#### 3.1.4 商品搜索功能
- 支持按商品名称（模糊查询）、编码（精确查询）、分类（下拉选择）搜索
- 搜索结果支持按库存数量/单价排序

### 3.2 中优先级（可选实现）
#### 3.2.1 销售统计分析
- 日销售额统计：按日期查询当日总销售额、交易笔数
- 商品销售排行榜：按销售数量展示TOP10商品（近30天）
- 销售趋势图表：用折线图展示近7天销售额变化（基于WinForms图表控件）

#### 3.2.2 库存报表
- 当前库存汇总：按分类统计商品总数、总价值（数量×单价）
- 滞销商品统计：近30天无销售记录的商品列表

#### 3.2.3 历史订单查询
- 按日期范围（开始日期-结束日期）、订单号查询历史销售记录
- 支持查看订单详情（商品明细、付款方式、总金额）

### 3.1 高优先级（已实现）
#### 3.1.5 会员管理
- 会员信息：姓名、手机号（唯一）、积分余额、注册时间、会员等级
- 会员积分：消费1元累计1积分，积分可抵扣现金（100积分=1元）
- 会员折扣：根据会员等级享受不同折扣，普通会员9.5折，高级会员9折
- 会员管理界面：支持会员信息的增、删、改、查操作
- 积分查询与兑换：查看会员积分明细，支持积分兑换商品或抵扣现金

### 3.3 低优先级（拓展实现）
#### 3.3.1 会员管理拓展（待实现）
- 会员消费记录分析
- 生日提醒与优惠券发放

#### 3.3.2 数据导入/导出
- 商品信息导入：支持Excel格式，必填字段：商品编码、名称、单价、销售单位、分类
- 销售报表导出：支持Excel格式，包含字段：订单号、销售时间、商品编码、名称、数量、金额、付款方式
- 库存报表导出：支持Excel格式，包含字段：商品编码、名称、分类、当前数量、库存下限、保质期

#### 3.3.3 操作日志记录
- 记录关键操作：登录/登出（用户、时间）、进货（商品、数量、操作人）、销售（订单号、操作人）、退货（订单号、操作人）
- 日志支持按操作类型、时间查询

#### 3.3.4 快捷键支持
- F1：打开帮助文档（本地TXT文件）
- F2：跳转至商品查询界面
- F3：跳转至销售界面
- F4：跳转至进货界面


## 4. 非功能性需求
### 4.1 性能要求
- 单条商品查询响应时间≤200ms
- 销售订单提交（含库存更新）响应时间≤500ms
- 支持同时在线用户数≤50000人

### 4.2 安全性要求
- 用户密码需加密存储（采用MD5算法），禁止明文保存
- 操作日志不可删除，确保关键操作可追溯
- MySQL数据库需设置强密码保护，禁止使用弱密码

### 4.3 兼容性要求
- 支持操作系统：Windows 10/11（32位/64位）
- 屏幕分辨率：最低支持1366×768像素

### 4.4 可靠性要求
- 系统异常退出后，未保存的销售订单需自动恢复（临时文件缓存）
- 每日自动备份数据库（备份文件路径：软件安装目录/Backup/YYYYMMDD.db）


## 5. 技术实现建议
- 后端：C# 9.0
- 数据库：Mariadb
- 前端：WinForms（桌面应用框架）
- 图表：WinForms自带图表控件（或LiveCharts库）
- Mock功能实现方式：
  - 支付：下拉选择付款方式，点击"确认支付"直接返回成功
  - 打印：生成TXT格式小票，保存至本地目录
  - 短信通知：操作完成后弹窗提示"会员积分变动已通知"


## 6. 评分加分项
1. 系统架构采用MVC模式（Model-View-Controller）
2. 代码注释覆盖率≥60%，包含关键业务逻辑说明
3. 完善的异常处理（如空值校验、数据格式错误提示）
4. 界面简洁美观（统一字体、配色，操作流程连贯）
5. 提供5个以上测试用例（覆盖进货、销售、退货等核心场景）